<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>挂号记录查询</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#165DFF',
                        success: '#00B42A',
                        warning: '#FF7D00',
                        danger: '#F53F3F'
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-50 font-sans">

    <!-- 主内容区 -->
    <main class="container mx-auto px-4 py-6">
        <h2 class="text-xl font-bold text-gray-800 mb-4">挂号记录查询</h2>
        
        <!-- 搜索区域 -->
        <div class="mb-6 relative">
            <input type="text" id="searchInput" 
                class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary outline-none transition-all"
                placeholder="输入科室、医生或日期关键字查询...">
            <i class="fa fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
        </div>
        
        <!-- 状态筛选 -->
        <div class="flex flex-wrap gap-2 mb-6">
            <button class="px-3 py-1 bg-primary text-white rounded-full text-sm active">全部</button>
            <button class="px-3 py-1 bg-white text-gray-700 rounded-full text-sm hover:bg-gray-100">未就诊</button>
            <button class="px-3 py-1 bg-white text-gray-700 rounded-full text-sm hover:bg-gray-100">已就诊</button>
            <button class="px-3 py-1 bg-white text-gray-700 rounded-full text-sm hover:bg-gray-100">已取消</button>
        </div>
        
        <!-- 记录列表 -->
        <div class="space-y-3" id="recordsList">
            <!-- 记录1 -->
            <div class="bg-white rounded-lg shadow-sm p-4 hover:shadow transition-shadow record-item" 
                 data-content="内科 张医生 2023-06-20">
                <div class="flex justify-between items-start">
                    <div>
                        <span class="inline-block px-2 py-1 bg-warning/10 text-warning text-xs rounded mr-2">未就诊</span>
                        <h3 class="font-medium">李四(内科))</h3>
                    </div>
                    <button class="text-primary text-sm view-detail" data-id="1">详情</button>
                </div>
                <div class="mt-2 grid grid-cols-2 md:grid-cols-4 gap-2 text-sm">
                    <div><span class="text-gray-500">医生：</span>张医生</div>
                    <div><span class="text-gray-500">日期：</span>2023-06-20</div>
                    <div><span class="text-gray-500">时间：</span>09:30</div>
                    <div><span class="text-gray-500">挂号号：</span>GH20230615</div>
                </div>
            </div>
            
            <!-- 记录2 -->
            <div class="bg-white rounded-lg shadow-sm p-4 hover:shadow transition-shadow record-item"
                 data-content="外科 李医生 2023-06-02">
                <div class="flex justify-between items-start">
                    <div>
                        <span class="inline-block px-2 py-1 bg-success/10 text-success text-xs rounded mr-2">已就诊</span>
                        <h3 class="font-medium">张三(外科)</h3>
                    </div>
                    <button class="text-primary text-sm view-detail" data-id="2">详情</button>
                </div>
                <div class="mt-2 grid grid-cols-2 md:grid-cols-4 gap-2 text-sm">
                    <div><span class="text-gray-500">医生：</span>李医生</div>
                    <div><span class="text-gray-500">日期：</span>2023-06-02</div>
                    <div><span class="text-gray-500">时间：</span>15:00</div>
                    <div><span class="text-gray-500">挂号号：</span>GH20230528</div>
                </div>
            </div>
            
            <!-- 记录3 -->
            <div class="bg-white rounded-lg shadow-sm p-4 hover:shadow transition-shadow record-item"
                 data-content="儿科 王医生 2023-05-15">
                <div class="flex justify-between items-start">
                    <div>
                        <span class="inline-block px-2 py-1 bg-gray-100 text-gray-500 text-xs rounded mr-2">已取消</span>
                        <h3 class="font-medium">赵五(儿科)</h3>
                    </div>
                    <button class="text-primary text-sm view-detail" data-id="3">详情</button>
                </div>
                <div class="mt-2 grid grid-cols-2 md:grid-cols-4 gap-2 text-sm">
                    <div><span class="text-gray-500">医生：</span>王医生</div>
                    <div><span class="text-gray-500">日期：</span>2023-05-15</div>
                    <div><span class="text-gray-500">时间：</span>10:30</div>
                    <div><span class="text-gray-500">挂号号：</span>GH20230510</div>
                </div>
            </div>
        </div>
    </main>

    <!-- 详情模态框 -->
    <div id="detailModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
        <div class="bg-white rounded-lg w-full max-w-md m-4">
            <div class="p-4 border-b flex justify-between items-center">
                <h3 class="font-bold">挂号详情</h3>
                <button id="closeModal" class="text-gray-500 hover:text-gray-700"><i class="fa fa-times"></i></button>
            </div>
            <div class="p-4" id="modalContent">
                <!-- 详情内容将通过JS填充 -->
            </div>
        </div>
    </div>

    <script>
        // 详情数据
        const details = {
            1: {
                status: "未就诊",
                statusClass: "bg-warning/10 text-warning",
                dept: "内科 - 心血管专科",
                doctor: "张医生 (主任医师)",
                date: "2023-06-20",
                time: "09:30-10:00",
                regTime: "2023-06-15 09:23",
                number: "GH2023061500892",
                fee: "50.00元",
                patient: "李先生",
                id: "310********1234",
                phone: "138****5678"
            },
            2: {
                status: "已就诊",
                statusClass: "bg-success/10 text-success",
                dept: "外科 - 普通外科",
                doctor: "李医生 (副主任医师)",
                date: "2023-06-02",
                time: "15:00-15:30",
                regTime: "2023-05-28 14:15",
                number: "GH2023052800456",
                fee: "40.00元",
                patient: "张先生",
                id: "310********1234",
                phone: "138****5678"
            },
            3: {
                status: "已取消",
                statusClass: "bg-gray-100 text-gray-500",
                dept: "儿科 - 儿童呼吸科",
                doctor: "王医生 (主治医师)",
                date: "2023-05-15",
                time: "10:30-11:00",
                regTime: "2023-05-10 11:08",
                cancelTime: "2023-05-12 16:42",
                number: "GH2023051000129",
                fee: "30.00元",
                patient: "赵先生",
                id: "310********1234",
                phone: "138****5678"
            }
        };

        // 搜索功能
        document.getElementById('searchInput').addEventListener('input', function(e) {
            const keyword = e.target.value.toLowerCase();
            const records = document.querySelectorAll('.record-item');
            
            records.forEach(record => {
                const content = record.getAttribute('data-content').toLowerCase();
                if (content.includes(keyword)) {
                    record.style.display = 'block';
                } else {
                    record.style.display = 'none';
                }
            });
        });

        // 查看详情
        document.querySelectorAll('.view-detail').forEach(btn => {
            btn.addEventListener('click', function() {
                const id = this.getAttribute('data-id');
                const data = details[id];
                let cancelHtml = data.cancelTime ? 
                    `<div class="mt-2"><span class="text-gray-500">取消时间：</span>${data.cancelTime}</div>` : '';
                
                document.getElementById('modalContent').innerHTML = `
                    <div class="mb-3">
                        <span class="inline-block px-2 py-1 ${data.statusClass} text-xs rounded mr-2">${data.status}</span>
                        <span class="font-medium">${data.dept}</span>
                    </div>
                    <div class="space-y-1 text-sm">
                        <div><span class="text-gray-500">医生：</span>${data.doctor}</div>
                        <div><span class="text-gray-500">就诊日期：</span>${data.date}</div>
                        <div><span class="text-gray-500">就诊时间：</span>${data.time}</div>
                        <div><span class="text-gray-500">挂号时间：</span>${data.regTime}</div>
                        ${cancelHtml}
                        <div><span class="text-gray-500">挂号编号：</span>${data.number}</div>
                        <div><span class="text-gray-500">挂号费用：</span>${data.fee}</div>
                        <div class="mt-3 pt-2 border-t"><span class="text-gray-500">患者信息：</span>${data.patient} (${data.id})</div>
                        <div><span class="text-gray-500">联系电话：</span>${data.phone}</div>
                    </div>
                `;
                
                document.getElementById('detailModal').classList.remove('hidden');
            });
        });

        // 关闭模态框
        document.getElementById('closeModal').addEventListener('click', function() {
            document.getElementById('detailModal').classList.add('hidden');
        });
    </script>
</body>
</html>
